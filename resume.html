<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CareerConnect | Resume Builder</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body,
        html {
            font-family: 'Poppins', sans-serif;
            background-color: #f9f9f9;
            color: #333;
            height: 100%;
            scroll-behavior: smooth;
            overflow-x: hidden;
        }

        .hero-section {
            height: 100vh;
            width: 100%;
            background: linear-gradient(to right, #0078D4, #00B4D8);
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: white;
            font-family: 'Segoe UI', sans-serif;
            position: relative;
            z-index: 10;
        }

        .hero-content {
            max-width: 600px;
            padding: 2rem;
            animation: fadeIn 1.2s ease-in-out;
        }

        .hero-content h1 {
            font-size: 3rem;
            font-weight: bold;
            margin: 0;
            padding: 0 20px;
            max-width: 800px;
        }

        .hero-content p {
            font-size: 1.2rem;
            margin: 1rem 0 2rem;
        }

        .resume-button {
            text-align: center;
            margin-top: 1.5rem;
        }

        .resume-button button {
            padding: 0.75rem 1.5rem;
            font-size: 1rem;
            background-color: #0077ff;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .resume-button button:hover {
            background-color: #005fcc;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        section {
            padding: 3rem 2rem;
            border-bottom: 1px solid #ddd;
            background-color: #fff;
        }

        section h2 {
            font-size: 2rem;
            margin-bottom: 1rem;
            color: #222;
            text-align: center;
        }

        section p {
            font-size: 1.1rem;
            margin-bottom: 1rem;
            text-align: center;
        }

        /* Updated input styling for resume builder */
        input[type="text"],
        input[type="email"],
        input[type="tel"],
        textarea {
            width: 100%;
            padding: 12px 16px;
            margin-bottom: 20px;
            border: 1px solid #ccc;
            border-radius: 8px;
            background-color: #f9f9f9;
            font-size: 16px;
            font-family: 'Segoe UI', sans-serif;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 24px;
        }

        input:focus,
        textarea:focus {
            border-color: #0078d4;
            box-shadow: 0 0 0 3px rgba(0, 120, 212, 0.2);
            outline: none;
        }

        select {
            padding: 10px;
            font-size: 16px;
            margin-bottom: 12px;
            border-radius: 6px;
            border: 1px solid #ccc;
            width: 100%;
        }

        input[type="url"],
        input[type="file"] {
            width: 100%;
            padding: 12px 16px;
            margin-bottom: 20px;
            border: 1px solid #ccc;
            border-radius: 8px;
            background-color: #f9f9f9;
            font-size: 16px;
            font-family: 'Segoe UI', sans-serif;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }

        input[type="file"] {
            padding: 10px;
            background-color: #fff;
            cursor: pointer;
        }

        input[type="url"]:focus,
        input[type="file"]:focus {
            border-color: #0078d4;
            box-shadow: 0 0 0 3px rgba(0, 120, 212, 0.2);
            outline: none;
        }

        nav h1 {
            font-size: 1.8rem;
            font-weight: 600;
        }

        nav ul {
            list-style: none;
            display: flex;
            gap: 1.5rem;
        }

        nav a {
            color: #fff;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        nav a:hover {
            color: #00bcd4;
        }

        .navbar {
            position: sticky;
            top: 0;
            background-color: #ffffff;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
            z-index: 1000;
            font-family: 'Segoe UI', sans-serif;
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Left Menu */
        .nav-menu {
            display: flex;
            gap: 20px;
            list-style: none;
            padding: 0;
        }

        .nav-menu li a {
            text-decoration: none;
            color: #333;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .nav-menu li a:hover {
            color: #0078D4;
        }

        /* Center Logo */
        .nav-center {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            align-items: center;
        }

        .nav-logo {
            display: flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
            color: #222;
            font-size: 1.2rem;
            font-weight: bold;
        }

        .nav-logo img {
            height: 32px;
        }

        /* Right Button */
        .nav-right .nav-button {
            background-color: #0078D4;
            color: #fff;
            padding: 10px 18px;
            border-radius: 6px;
            text-decoration: none;
            font-weight: 500;
            transition: background-color 0.3s ease;
        }

        .nav-right .nav-button:hover {
            background-color: #005fa3;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .nav-container {
                flex-direction: column;
                align-items: center;
            }

            .nav-left,
            .nav-right {
                display: none;
            }

            .nav-menu {
                flex-direction: column;
                gap: 15px;
                margin-top: 10px;
            }

            .nav-center {
                position: static;
                transform: none;
                margin-bottom: 10px;
            }
        }

        .logo-text {
            font-size: 1.2rem;
            font-weight: bold;
            color: #222;
        }

        /* Emoji Styling */
        .emoji-icon {
            font-size: 1.4cm;
            line-height: 1;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .emoji-icon:hover {
            content: "ðŸ˜„";
            font-size: 1.4cm;
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.4rem 1rem;
            height: auto;
            background-color: #fff;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        nav .logo {
            font-size: 1.2rem;
            /* Slightly smaller logo text */
            font-weight: 600;
        }

        nav ul {
            display: flex;
            gap: 1.2rem;
            /* Tighter spacing between links */
            list-style: none;
            margin: 0;
            padding: 0;
        }

        nav ul li a {
            text-decoration: none;
            font-size: 0.95rem;
            /* Reduced font size */
            color: #333;
            padding: 0.25rem 0.5rem;
            transition: color 0.3s ease;
        }

        nav ul li a:hover {
            color: #007bff;
        }

        blockquote {
            position: relative;
            z-index: 2;
            padding: 1rem;
            color: white;
            /* Ensures the story text is white */
            font-size: 0.95rem;
            background: rgba(250, 249, 249, 0.4);
            /* Optional: adds contrast for readability */
            font-style: italic;
            line-height: 1.4;
        }

        .loko-name {
            background-color: transparent;
            color: #fff;
            font-size: 1rem;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.6);
            /* Optional for contrast */
        }

        footer {
            background-color: #1a1a1a;
            color: #ccc;
            text-align: center;
            padding: 2rem;
        }

        footer ul {
            list-style: none;
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1rem;
        }

        footer a {
            color: #ccc;
            text-decoration: none;
            font-size: 0.9rem;
        }

        footer a:hover {
            color: #00bcd4;
        }

        footer {
            position: relative;
            z-index: 2;
            text-align: center;
            font-weight: bold;
            margin-top: 0.5rem;
        }
    </style>
</head>

<body>
    <!-- Navbar -->
    <header class="navbar">
        <div class="nav-container">
            <div class="nav-left">
                <ul class="nav-menu">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="about.html">About</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
            </div>

            <div class="nav-center">
                <a href="index.html" class="nav-logo">
                    <img src="https://copilot.microsoft.com/th/id/BCO.9d61c587-f691-4c92-9a35-4cb420bf7a57.png"
                        alt="CareerConnect Logo" />
                    <span class="logo-text">CareerConnect</span>
                </a>
            </div>

            <div class="nav-right">
                <div class="emoji-icon" id="emoji" title="Feeling good!">ðŸ™‚</div>
            </div>
        </div>
    </header>
    <!-- âœ… Entry Page -->
    <section class="hero-section" id="hero-section">
        <div class="hero-content">
            <h1>Build Your Resume with Confidence</h1>
            <p>Smart validation, ATS scoring, and beautiful PDF generation â€” all in one place.</p>
            <div class="resume-button">
                <button onclick="document.getElementById('resume-builder').scrollIntoView({ behavior: 'smooth' })">Start
                    Building</button>
            </div>
        </div>
    </section>


    <!-- âœ… Resume Builder Section -->
    <div id="resume-content">
        <section id="resume-builder">
            <h2>Resume Builder</h2>
            <form id="resumeForm" onsubmit="return validateForm()">
                <div class="form-group">
                    <label for="linkedin">LinkedIn Profile</label>
                    <input type="url" id="linkedin" name="linkedin" placeholder="https://linkedin.com/in/yourprofile">
                </div>

                <div class="form-group">
                    <label for="portfolio">Portfolio Website</label>
                    <input type="url" id="portfolio" name="portfolio" placeholder="https://yourportfolio.com">
                </div>
                <div class="form-group">
                    <label for="github">GitHub Profile</label>
                    <input type="url" id="github" name="github" placeholder="https://github.com/yourusername">
                </div>


                <div class="form-group">
                    <label for="photo">Upload Photo</label>
                    <input type="file" id="photo" name="photo" accept="image/*">
                </div>
                <img id="preview" src="#" alt="Photo Preview" style="display:none;" />

                <input type="text" placeholder="Full Name" id="name" required>
                <input type="email" placeholder="Email" id="email" required>
                <span id="emailError" style="color: red; font-size: 14px; display: none;"></span>

                <label for="country">Select Country:</label>
                <select id="country" onchange="updateCountryCode()">
                    <option value="+91" selected>ðŸ‡®ðŸ‡³ India (+91)</option>
                    <option value="+1">ðŸ‡ºðŸ‡¸ United States (+1)</option>
                    <option value="+44">ðŸ‡¬ðŸ‡§ United Kingdom (+44)</option>
                    <option value="+1">ðŸ‡¨ðŸ‡¦ Canada (+1)</option>
                    <option value="+61">ðŸ‡¦ðŸ‡º Australia (+61)</option>
                    <option value="+49">ðŸ‡©ðŸ‡ª Germany (+49)</option>
                </select>

                <input type="tel" id="phone" placeholder="Phone Number" required />
                <span id="phoneError" style="color:red; font-size:14px; display:none;"></span>

                <textarea placeholder="Skills (comma-separated)" id="skills"></textarea>
                <textarea placeholder="Experience" id="experience"></textarea>
                <textarea placeholder="Education" id="education"></textarea>
                <textarea placeholder="Projects" id="projects"></textarea>
                <textarea placeholder="Job Description (optional, paste posting here for ATS match)" id="jd"></textarea>

                <div class="resume-button">
                    <button id="generate-resume">Generate Resume PDF</button>
                    <button type="button" onclick="evaluateResume()">Evaluate Resume</button>
                    <button type="button" onclick="evaluateATS()">ATS Check</button>
                </div>

                <h3 id="score"></h3>
                <ul id="feedback"></ul>
                <h3 id="atsScore"></h3>
                <ul id="atsFeedback"></ul>
            </form>
        </section>
    </div>
    <footer>
        <p>&copy; 2025 Smart Job Portal</p>
        <ul>
            <li><a href="contact.html">Contact</a></li>
            <li><a href="copyright.html">Privacy Policy</a></li>
        </ul>
    </footer>

    <!-- âœ… Scripts -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script>

        // Smooth scroll function
        function scrollToSection(id) {
            document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
        }

        // Emoji hover effect
        const emoji = document.getElementById("emoji");
        if (emoji) {
            emoji.addEventListener("mouseover", () => emoji.textContent = "ðŸ˜„");
            emoji.addEventListener("mouseout", () => emoji.textContent = "ðŸ™‚");
        }
        window.addEventListener('scroll', () => {
            const scrollY = window.scrollY;
            const windowHeight = window.innerHeight;
            const documentHeight = document.body.scrollHeight;

            if (scrollY + windowHeight >= documentHeight - 50) {
                document.querySelectorAll('#features, #about').forEach(section => {
                    section.style.opacity = '1';
                    section.style.pointerEvents = 'auto';
                });
            }
        });
        function generateResume() {
            const name = document.getElementById("name").value;
            const email = document.getElementById("email").value;
            const phone = document.getElementById("phone").value;
            const skills = document.getElementById("skills").value;
            const experience = document.getElementById("experience").value;
            const education = document.getElementById("education").value;
            const projects = document.getElementById("projects").value;

            const resumeContent = `
Name: ${name}
Email: ${email}
Phone: ${phone}

Skills:
${skills}

Experience:
${experience}

Education:
${education}

Projects:
${projects}
  `;

            const blob = new Blob([resumeContent], { type: "text/plain" });
            const link = document.createElement("a");
            link.href = URL.createObjectURL(blob);
            link.download = `${name}-resume.txt`;
            link.click();
        }
        document.getElementById("photo").addEventListener("change", function () {
            const file = this.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    const preview = document.getElementById("preview");
                    preview.src = e.target.result;
                    preview.style.display = "block";
                };
                reader.readAsDataURL(file);
            }
        });


        function addRealtimeValidation(id, pattern, required, errorMsg, requiredMsg) {
            const input = document.getElementById(id);

            // Check if error span exists, else create
            let errorSpan = document.getElementById(id + "Error");
            if (!errorSpan) {
                errorSpan = document.createElement("span");
                errorSpan.id = id + "Error";
                errorSpan.style.color = "red";
                errorSpan.style.fontSize = "14px";
                errorSpan.style.display = "none";
                input.parentNode.insertBefore(errorSpan, input.nextSibling);
            }

            input.addEventListener("input", () => {
                const value = input.value.trim();

                if (required && value === "") {
                    errorSpan.textContent = requiredMsg || "This field is required.";
                    errorSpan.style.display = "block";
                    input.setCustomValidity(errorSpan.textContent);
                } else if (value !== "" && !pattern.test(value)) {
                    errorSpan.textContent = errorMsg;
                    errorSpan.style.display = "block";
                    input.setCustomValidity(errorSpan.textContent);
                } else {
                    errorSpan.textContent = "";
                    errorSpan.style.display = "none";
                    input.setCustomValidity("");
                }
            });
        }

        // Define regex patterns
        const linkedinPattern = /^https:\/\/(www\.)?linkedin\.com\/.*$/i;
        const githubPattern = /^https:\/\/(www\.)?github\.com\/.*$/i;
        const portfolioPattern = /^https?:\/\/.+$/i;

        // Apply realtime validation
        addRealtimeValidation(
            "linkedin",
            linkedinPattern,
            true,
            "Invalid LinkedIn URL. Must start with https://linkedin.com/",
            "LinkedIn URL is required."
        );

        addRealtimeValidation(
            "github",
            githubPattern,
            false,
            "Invalid GitHub URL. Must start with https://github.com/"
        );

        addRealtimeValidation(
            "portfolio",
            portfolioPattern,
            false,
            "Invalid Portfolio URL. Must start with http:// or https://"
        );

        // Your existing validateForm() function can remain for final check on submit

        // Allowed email domains
        const allowedDomains = [
            "icloud.com",
            "microsoft.com",
            "outlook.com",
            "hotmail.com",
            "gmail.com",
            "yahoo.com",
            "aol.com"
        ];

        // Real-time email validation
        const emailInput = document.getElementById("email");

        // Create or get error span for email
        let emailError = document.getElementById("emailError");
        if (!emailError) {
            emailError = document.createElement("span");
            emailError.id = "emailError";
            emailError.style.color = "red";
            emailError.style.fontSize = "14px";
            emailError.style.display = "none";
            emailInput.parentNode.insertBefore(emailError, emailInput.nextSibling);
        }

        emailInput.addEventListener("input", () => {
            const email = emailInput.value.trim();

            if (email === "") {
                emailError.textContent = "Email is required.";
                emailError.style.display = "block";
                emailInput.setCustomValidity("Email is required.");
                return;
            }

            const emailFormat = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailFormat.test(email)) {
                emailError.textContent = "Please enter a valid email address.";
                emailError.style.display = "block";
                emailInput.setCustomValidity("Invalid email address.");
                return;
            }

            const domain = email.split("@")[1].toLowerCase();
            if (!allowedDomains.includes(domain)) {
                emailError.textContent = `Email domain must be one of: ${allowedDomains.join(", ")}`;
                emailError.style.display = "block";
                emailInput.setCustomValidity("Email domain not allowed.");
            } else {
                emailError.textContent = "";
                emailError.style.display = "none";
                emailInput.setCustomValidity("");
            }
        });

        // Helper to compose full phone number from custom selector
        function getFullPhoneNumber() {
            const codeElement = document.getElementById("selectedCode");
            const phoneElement = document.getElementById("phone");
            const codeText = codeElement ? codeElement.textContent : "";
            const phoneText = phoneElement ? phoneElement.value : "";
            return `${codeText} ${phoneText}`.trim();
        }

        function validateForm() {
            console.log('validateForm called');

            // Other validation code...

            const email = document.getElementById("email").value.trim();
            const emailFormat = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

            if (!emailFormat.test(email)) {
                alert("Please enter a valid email address.");
                return false;
            }

            const allowedDomains = [
                "icloud.com",
                "microsoft.com",
                "outlook.com",
                "hotmail.com",
                "gmail.com",
                "yahoo.com",
                "aol.com"
            ];

            const domain = email.split("@")[1].toLowerCase();
            if (!allowedDomains.includes(domain)) {
                alert(`Email domain not allowed.`);
                return false;
            }

            // Check if phone validation is available
            if (window.iti && !window.iti.isValidNumber()) {
                alert("Please enter a valid phone number.");
                return false;
            }

            console.log('All validation passed, calling generatePDF');
            generatePDF();
            return false;
        }

        async function generatePDF() {
            console.log('generatePDF function called');
            try {
                // Check if jsPDF is available
                if (typeof window.jspdf === 'undefined') {
                    console.error('jsPDF not available');
                    alert('PDF generation library not loaded. Please refresh the page.');
                    return;
                }
                console.log('jsPDF is available:', window.jspdf);

                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();

                // Border
                doc.setLineWidth(1);
                doc.setDrawColor(0, 0, 0);
                doc.rect(5, 5, 200, 287);

                const name = document.getElementById("name").value;
                const email = document.getElementById("email").value;
                const fullPhoneNumber = getFullPhoneNumber();

                const skills = document.getElementById("skills").value;
                const experience = document.getElementById("experience").value;
                const education = document.getElementById("education").value;
                const projects = document.getElementById("projects").value;
                const photoInput = document.getElementById("photo");
                const linkedin = document.getElementById("linkedin").value;
                const github = document.getElementById("github").value;
                const portfolio = document.getElementById("portfolio").value;

                const startY = (photoInput.files && photoInput.files[0]) ? 45 : 22;

                if (photoInput.files && photoInput.files[0]) {
                    const reader = new FileReader();
                    reader.onload = function (e) {
                        const imageData = e.target.result;
                        doc.addImage(imageData, 'JPEG', 150, 10, 40, 40);
                        addText(doc, name, email, fullPhoneNumber, linkedin, github, portfolio, skills, experience, education, projects, startY);
                    };
                    reader.readAsDataURL(photoInput.files[0]);
                } else {
                    // No image â†’ just text
                    addText(doc, name, email, fullPhoneNumber, linkedin, github, portfolio, skills, experience, education, projects, startY);
                }
            } catch (error) {
                console.error('Error generating PDF:', error);
                alert('Error generating PDF. Please try again.');
            }
        }







        function addText(doc, name, email, phone, linkedin, github, portfolio, skills, experience, education, projects, y) {
            // NAME â€“ Centered
            doc.setFont("helvetica", "bold");
            doc.setFontSize(18);
            doc.setTextColor(0, 0, 139);
            doc.text(name.toUpperCase(), 105, y - 7, null, null, 'center');
            y += 7;

            // Contact Line Function
            const addContactLine = (label, value) => {
                if (!value.trim()) return; // ðŸŸ¢ Skip if empty

                doc.setFont("helvetica", "bold");
                doc.setFontSize(13);
                doc.setTextColor(0, 0, 139);
                doc.text(label.toUpperCase(), 10, y);

                doc.setDrawColor(0, 0, 0);
                doc.setLineWidth(0.3);
                doc.line(10, y + 2, 200, y + 2);
                y += 8;

                doc.setFont("helvetica", "normal");
                doc.setFontSize(11);
                doc.setTextColor(0);
                const wrappedValue = doc.splitTextToSize(value, 180);
                doc.text(wrappedValue, 10, y);
                y += wrappedValue.length * 6 + 5;
            };

            // ðŸ”¹ Only add if provided
            addContactLine("Email", email);
            addContactLine("Phone", phone);
            addContactLine("LinkedIn", linkedin);
            addContactLine("GitHub", github);
            addContactLine("Portfolio", portfolio);

            // Sections
            const renderSection = (title, content) => {
                if (!content.trim()) return; // ðŸŸ¢ Skip if empty

                doc.setFont("helvetica", "bold");
                doc.setFontSize(13);
                doc.setTextColor(0, 0, 139);
                doc.text(title, 10, y);
                doc.line(10, y + 2, 200, y + 2);
                y += 10;

                doc.setFont("helvetica", "normal");
                doc.setFontSize(11);
                doc.setTextColor(0);
                const split = doc.splitTextToSize(content, 180);
                doc.text(split, 10, y);
                y += split.length * 6 + 5;
            };

            renderSection("SKILLS", skills);
            renderSection("EXPERIENCE", experience);
            renderSection("EDUCATION", education);
            renderSection("PROJECTS", projects);

            doc.save(`${name}_Resume.pdf`);
        }







        function evaluateResume() {
            let score = 10;
            let feedback = [];

            const skills = document.getElementById("skills").value.trim();
            const experience = document.getElementById("experience").value.trim();
            const education = document.getElementById("education").value.trim();
            const linkedin = document.getElementById("linkedin").value.trim();
            const github = document.getElementById("github").value.trim();
            const projects = document.getElementById("projects").value.trim();

            // Skill Check
            if (skills === "" || skills.split(",").length < 3) {
                score -= 2;
                feedback.push("Your skills section is too short. Try adding at least 3 strong skills.");
            }

            // Experience Check
            if (experience.length < 50) {
                score -= 2;
                feedback.push("Your experience section is quite brief. Add more specific roles or work.");
            }

            // Education Check
            if (education.length < 30) {
                score -= 1;
                feedback.push("Education info seems limited. Add degree name, institute & year.");
            }

            // LinkedIn Check
            if (!linkedin.includes("linkedin.com")) {
                score -= 1;
                feedback.push("LinkedIn profile missing or invalid. Add a valid profile to boost credibility.");
            }

            // GitHub Check
            if (!github.includes("github.com")) {
                score -= 1;
                feedback.push("GitHub profile missing or invalid. Showcase your code portfolio.");
            }

            // Projects Check
            if (projects.length < 40) {
                score -= 2;
                feedback.push("Projects section needs improvement. Add impactful or real-world projects.");
            }

            // Final Display
            const scoreText = score < 5 ? `Resume Score: ${score}/10 ðŸ‘Ž` :
                score < 8 ? `Resume Score: ${score}/10 ðŸ‘ (Room for improvement)` :
                    `Resume Score: ${score}/10 ðŸ”¥ Solid!`;

            document.getElementById("score").innerText = scoreText;
            document.getElementById("feedback").innerHTML =
                feedback.length > 0
                    ? feedback.map(item => `<li>${item}</li>`).join("")
                    : "<li>No major issues detected. Great job!</li>";
        }

        // --- ATS EVALUATION ---
        function evaluateATS() {
            const text = {
                skills: (document.getElementById("skills").value || "").toLowerCase(),
                exp: (document.getElementById("experience").value || "").toLowerCase(),
                edu: (document.getElementById("education").value || "").toLowerCase(),
                proj: (document.getElementById("projects").value || "").toLowerCase(),
                jd: (document.getElementById("jd").value || "").toLowerCase(),
            };

            const resumeText = [text.skills, text.exp, text.edu, text.proj].join("\n");

            // Extract keywords from JD: words >= 3 chars, de-duped
            const jdKeywords = Array.from(new Set((text.jd.match(/[a-zA-Z][a-zA-Z+.#\-]{2,}/g) || [])
                .map(w => w.replace(/^[#.+-]+|[#.+-]+$/g, ""))
            ));

            // Common ATS-friendly headings
            const requiredHeadings = ["skills", "experience", "education", "projects"];

            let score = 0;
            const tips = [];

            // 1) Headings check
            const headingsText = resumeText.toLowerCase();
            requiredHeadings.forEach(h => {
                if (headingsText.includes(h)) score += 10; else tips.push(`Add a clear section heading: ${h}`);
            });

            // 2) JD keyword coverage
            if (jdKeywords.length > 0) {
                const present = jdKeywords.filter(k => resumeText.includes(k));
                const coverage = Math.round((present.length / jdKeywords.length) * 100);
                score += Math.min(coverage, 60); // cap to avoid overweighting
                if (coverage < 60) tips.push(`Match more JD keywords: ${jdKeywords.slice(0, 10).join(", ")}`);
            } else {
                tips.push("Paste the Job Description to compute a JD keyword match.");
            }

            // 3) Formatting sanity
            const hasBullets = /\n\s*[-â€¢*]/.test(resumeText);
            if (hasBullets) score += 5; else tips.push("Use simple bullets (- or â€¢) for responsibilities.");

            const hasDates = /(20\d{2}|19\d{2})/.test(resumeText);
            if (hasDates) score += 5; else tips.push("Add years for roles/education (e.g., 2022 â€“ 2024).");

            // Clamp score
            score = Math.max(0, Math.min(100, score));

            // Output
            const label = score < 50 ? `ATS Readiness: ${score}/100 â€“ Needs work` :
                score < 75 ? `ATS Readiness: ${score}/100 â€“ Decent` :
                    `ATS Readiness: ${score}/100 â€“ Strong`;
            document.getElementById("atsScore").innerText = label;
            document.getElementById("atsFeedback").innerHTML = tips.length
                ? tips.map(t => `<li>${t}</li>`).join("")
                : "<li>Looks ATS-friendly. Nice!</li>";
        }

        // Phone input simple validation and helper is handled in resume.html's inline script.
    </script>

</body>

</html>